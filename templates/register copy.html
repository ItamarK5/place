<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="/file?key=tmp.css">
    <script src="/file?key=jquery.js"></script>
    <style>
        form {
            grid-template-columns: max-content max-content max-content;
            /*label - 15px- username - 20px - password - 20px -repassword - 20px - email - message-label-with-spaces register link*/
            grid-template-rows: max-content 15px max-content 15px max-content 15px max-content 15px max-content max-content max-content max-content;
            align-items: center;
        }
        #register-title {
            grid-row: 1/2;
            grid-column: 1/4;
        }

        .text-input {
            float: right;
            grid-column: 2/4;
            margin-left: 20px;
        }

        .text-lbl {
            align-self: center;
            float: left;
            grid-column: 1/2;
            user-select:none;
        }

        .user-row {grid-row: 3/4;}
        .pswd-row {grid-row: 5/6;}
        .repswd-row {grid-row: 7/8;}
        .mail-row {grid-row: 9/10;}

        #message {
            grid-row: 11/12;
            grid-column:1/4;
            margin-bottom:20px;
            margin-top:20px;
        }
        #register {
            grid-row: 13/14;
            grid-column: 2/3;
        }
        #login-link {
            grid-row:14/15;
            grid-column:0/3;
        }
</style>
</head>
<body>
    <form action="/register" method="POST" accept-charset="utf-8"
              class='center'>
        <label id='register-title' class="title-style0 nonselect">Register to Social Painter</label>
        <label id="lbl-user" for='name'
                class="text-lbl label-style0 user-row nonselect">Username:</label>
        <input type="text" name='name'
                class='text-input text-input-style0 user-row' required>
        <label id='lbl-pswd' for='pswd'
                class="text-lbl label-style0 pswd-row nonselect">Password:</label>
        <input type="password" name="pswd" max="15" min="5" class='text-input text-input-style0 pswd-row'>
        <label id='lbl-repswd' for='repswd' class="text-lbl label-style0 repswd-row nonselect">RePassword:</label>
        <input type="password" name="repswd" max="15" min="9" class='text-input text-input-style0 repswd-row'>
        <label id='lbl-mail' for='email' class="text-lbl label-style0 mail-row nonselect">Mail:</label>
        <input type="text" name="email" max="15" min="7" class='text-input text-input-style0 mail-row'>
        <label id="message" class="nonselect"></label>
        <input type='submit' value='register' id='register' class='button-style0'>
        <a href="/login" id="login-link" class="link-style0">You have an account, login now</a>
    </form>
    <script>
    $('form').submit(function(e){
        e.preventDefault();
        let form = $(this);
        $.ajax({
            url:form.attr('action'),
            method:form.attr('method'),
            data:form.serialize(),
            success(data, status){
                try{
                    if(data.code == 1){
                        $('#message').addClass('sucsess-lbl').removeClass('error-lbl').text(data.data);
                    } else {
                        $('#message').addClass('error-lbl').removeClass('sucsess-lbl').text(data.data);
                    }
                }
                catch
                {
                    label.addClass('error-text').removeClass('sucsess-text').text('Client Error')
                }
            }
        });
    });
    </script>
</body>
</html>