<html>
    <head>
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        <style>
        .vertical-center {
            min-height: 100%;  /* Fallback for browsers do NOT support vh unit */
            min-height: 100vh; /* These two lines are counted as one :-)       */
            padding:0;
            margin:auto;
            display: flex;
            align-items: center;
        }
        .input-group-prepend { width:25%; height:100%;}
        .input-group-text    { width:100%;padding:none;}
        </style>
    </head>
    <body>
        <div class="jumbotron vertical-center">
                <form class="container justify-content-center w-50" method="POST" url="{{ url('sign-up') }}">
                {% for field in form.fields %}
                {% if field.errors or field.force_error %}{% set style=form.error_input_style %}{% else %}{% set style=form.success_input_style %} {% endif %}
                <div class="form-row mb-3">
                        <div class="input-group has-success has-feedback mb-2">
                            <div class="input-group-prepend"><label class="input-group-text rounded-left text-white border-right-0 {{style['label']}}" for="{{field.template.name}}" id="{{field.template.name}}-label">{{field.template.label}}</label></div>
                            <input type="{{field.template.input_type}}" class="form-control rounded-right {{ style['input'] }}" id="{{field.template.name}}" value="{{field.ret_value}}" name="{{field.template.name}}" aria-label="{{field.template.name}}-label" {% if field.template.help_text %} data-toggle="tooltip" title='{{field.template.help_text}}' {% endif %} {% if field.template.required %} required {% endif %}>
                        </div>
                </div>
                {% if field.errors %}
                {% for err in field.errors %}
                <div class="form-row mb-1">
                    <div class="col rounded alert-danger text-justify ml-5 mr-5" style="text-ancher:middle;">
                        {{ err }}
                    </div>
                </div>
                {% endfor %}
                {% endif %}
                {% endfor %}
                {# link to forget your password #}
                <div class="justify-content-center form-row">
                    <a class="col-6 primary-text mb-3" id="reset-link" href={{ url('login') }}>Have an Account</a>
                </div>
                <div class="form-row justify-content-center">
                        <div class="form-check">
                                <input type="checkbox" id="pswd-show-button">
                                <label class="pswd-shpw-label">Check me out</label>
                        <script>
                            let pswd_fields = $('input[type="password"]')
                            $('#pswd-show-button').click(function(e){
                                console.log(this.value)
                                pswd_fields.attr('type', this.value == 'off'? 'password' :  'text');
                                $('#pswd-show-label').text('Hide Password' ? this.value == 'on' : 'Show Password');
                            })
                        </script>
                        </div></div>
                        <div class="form-row justify-content-center">
                            <button type=submit class="btn btn-primary" id="login-button">Register</button>
                        </div>
                        {% if form.errors %}
                        <div class="d-flex flex-column justify-content-center mt-2">
                        {% for err in form.errors %}
                                <div class="p-2 alert alert-danger text-center mb-1">{{err}}</div>
                        {% endfor %}
                        </div>
                        {% endif %}
                    </form>
                </div>
            <script>
                $(document).ready(function(){
                  $('[data-toggle="tooltip"]').tooltip();
                  $('#login-button').click(function(e){
                         this.innerHTML='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>Loading...'
                    $('form').submit()
                  })
//                  $('#reset-link').attr('href', window.location.origin + '/reset-password')
  //                $('#reg-link').attr('href', window.location.origin + '/register')
                });
            </script>
    </body>
</html>